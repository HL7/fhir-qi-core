{
  "resourceType": "StructureDefinition",
  "id": "qicore-condition-encounter-diagnosis",
  "extension" : [
    {
      "url" : "http://hl7.org/fhir/StructureDefinition/cqf-modelInfo-primaryCodePath",
      "valueString": "code"
    },
    {
      "url" : "http://hl7.org/fhir/StructureDefinition/cqf-modelInfo-isIncluded",
      "valueBoolean": true
    },
    {
      "url" : "http://hl7.org/fhir/StructureDefinition/cqf-modelInfo-isRetrievable",
      "valueBoolean": true
    },
    {
      "url" : "http://hl7.org/fhir/StructureDefinition/cqf-modelInfo-label",
      "valueString":"ConditionEncounterDiagnosis"
    }
  ],
  "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-condition-encounter-diagnosis",
  "version": "6.0.0",
  "name": "QICoreConditionEncounterDiagnosis",
  "title": "QICore Condition Encounter Diagnosis",
  "status": "active",
  "experimental": false,
  "date": "2022-04-20",
  "publisher": "http://www.hl7.org/Special/committees/cqi/index.cfm",
  "contact": [
    {
      "name": "Clinical Quality Information WG",
      "telecom": [
        {
          "system": "url",
          "value": "http://www.hl7.org/Special/committees/cqi"
        }
      ]
    }
  ],
  "description": "The QI-Core Condition Encounter Diagnosis Profile is based upon the US Core Condition Encounter Diagnosis Profile.   In version 5.0.0, the QI-Core Condition Profile has been split into the QI-Core Condition Encounter Diagnosis Profile and QI-Core Condition Problems and Health Concerns Profile. To promote interoperability and adoption through consistent implementation, this profile defines constraints and extensions on the Condition resource for the minimal set of data to record, search, and retrieve information about an encounter diagnosis.  It defines the core set of elements and extensions for quality rule and measure authors.",
  "jurisdiction": [
    {
      "coding": [
        {
          "system": "urn:iso:std:iso:3166",
          "code": "US"
        }
      ]
    }
  ],
  "copyright": "Used by permission of HL7 International, all rights reserved Creative Commons License",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "Condition",
  "baseDefinition": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-condition-encounter-diagnosis",
  "derivation": "constraint",
  "differential": {
    "element": [
	  {
		"id" : "Condition.code",
        "path" : "Condition.code",
        "short" : "(QI) Identification of the condition, problem or diagnosis",
        "alias" : [
          "Type"
        ],
        "min" : 1,
        "max" : "1",
        "base" : {
          "path" : "Condition.code",
          "min" : 1,
          "max" : "1"
        },
        "type" : [
          {
            "code" : "CodeableConcept"
          }
        ],
        "mustSupport" : true,
        "isModifier" : false,
        "isSummary" : true,
		"binding" : {
          "extension" : [
            {
              "extension" : [
                {
                  "url" : "purpose",
                  "valueCode" : "current"
                },
                {
                  "url" : "valueSet",
                  "valueCanonical" : "http://hl7.org/fhir/us/core/ValueSet/us-core-condition-code"
                },
                {
                  "url" : "documentation",
                  "valueMarkdown" : "US Core uses the current additional binding from FHIR R5 for this coded element for more flexibility when exchanging legacy and text-only data."
                }
              ],
              "url" : "http://hl7.org/fhir/tools/StructureDefinition/additional-binding"
            }
          ],
          "strength" : "preferred",
          "description" : "Valueset to describe the actual problem experienced by the patient",
          "valueSet" : "http://hl7.org/fhir/us/core/ValueSet/us-core-condition-code"	  
		 },
        "mapping" : [
          {
            "identity" : "workflow",
            "map" : "Event.code"
          },
          {
            "identity" : "w5",
            "map" : "FiveWs.what[x]"
          },
          {
            "identity" : "sct-concept",
            "map" : "code 246090004 |Associated finding| (< 404684003 |Clinical finding| MINUS\n<< 420134006 |Propensity to adverse reactions| MINUS \n<< 473010000 |Hypersensitivity condition| MINUS \n<< 79899007 |Drug interaction| MINUS\n<< 69449002 |Drug action| MINUS \n<< 441742003 |Evaluation finding| MINUS \n<< 307824009 |Administrative status| MINUS \n<< 385356007 |Tumor stage finding|) \nOR < 413350009 |Finding with explicit context|\nOR < 272379006 |Event|"
          },
          {
            "identity" : "v2",
            "map" : "PRB-3"
          },
          {
            "identity" : "rim",
            "map" : ".value"
          },
          {
            "identity" : "sct-attr",
            "map" : "246090004"
          },
          {
            "identity" : "argonaut-dq-dstu2",
            "map" : "Condition.code"
          }
        ]
        },       
		{
        "id": "Condition.subject",
        "extension": [
          {
            "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
            "valueBoolean": true
          }
        ],
        "path": "Condition.subject",
        "short": "(QI) Who has the condition?",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-patient",
              "http://hl7.org/fhir/StructureDefinition/Group"
            ],
			"_targetProfile" : [
              {
                "extension" : [
                  {
                    "url" : "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                    "valueBoolean" : true
                  }
                ]
              },
              {
                "extension" : [
                  {
                    "url" : "http://hl7.org/fhir/StructureDefinition/elementdefinition-type-must-support",
                    "valueBoolean" : false
                  }
                ]
              } 
            ]
          }
        ],
		"mustSupport" : true,
        "isModifier" : false,
        "isSummary" : true
      },
      {
        "id": "Condition.encounter",
        "extension": [
          {
            "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
            "valueBoolean": true
          }
        ],
        "path": "Condition.encounter",
        "short": "(QI) Encounter created as part of",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-encounter"
            ]
          }
        ]
      },
      {
        "id": "Condition.onset[x]",
        "extension": [
          {
            "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
            "valueBoolean": true
          }
        ],
        "path": "Condition.onset[x]",
        "short": "(QI) Estimated or actual date, date-time, or age",
        "type": [
          {
            "extension": [
              {
                "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
                "valueBoolean": true
              }
            ],
            "code": "dateTime"
          },
          {
            "extension": [
              {
                "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
                "valueBoolean": true
              }
            ],
            "code": "Age"
          },
          {
            "extension": [
              {
                "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
                "valueBoolean": true
              }
            ],
            "code": "Period"
          },
          {
            "extension": [
              {
                "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
                "valueBoolean": true
              }
            ],
            "code": "Range"
          }
        ]
      },
      {
        "id": "Condition.abatement[x]",
        "extension": [
          {
            "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
            "valueBoolean": true
          }
        ],
        "path": "Condition.abatement[x]",
        "short": "(QI) When in resolution/remission",
        "type": [
          {
            "extension": [
              {
                "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
                "valueBoolean": true
              }
            ],
            "code": "dateTime"
          },
          {
            "extension": [
              {
                "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
                "valueBoolean": true
              }
            ],
            "code": "Age"
          },
          {
            "extension": [
              {
                "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
                "valueBoolean": true
              }
            ],
            "code": "Period"
          },
          {
            "extension": [
              {
                "url": "http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-keyelement",
                "valueBoolean": true
              }
            ],
            "code": "Range"
          }
        ]
      }
    ]
  }
}
